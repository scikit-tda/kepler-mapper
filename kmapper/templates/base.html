<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="generator" content="KeplerMapper">
  <title>{{ title }} | KeplerMapper</title>

  <link rel="icon" type="image/png" href="http://i.imgur.com/axOG6GJ.jpg" />

  <link href='https://fonts.googleapis.com/css?family=Roboto+Mono:700,300' rel='stylesheet' type='text/css'>
  <style>{{ css_text }}</style>

</head>

<body id="display">

  <!-- Storage of data so D3 can access it later. This is in <body> so Chrome doesn't wholesale move all head content to body. -->
  <div id="json_graph" data-graph='{{ mapper_data|tojson|safe }}' style="display:none"></div>
  <div id="json_colorscale" data-colorscale='{{ colorscale|tojson|safe }}' style="display:none"></div>

  {% import 'cluster_tooltip.html' as cluster_tooltip -%}
  <div id='node_tooltips' style='display:none'>
  {% for node_data in mapper_data.nodes %}
  	{% set node_tooltip_data = node_data.tooltip %}
  	<div id='node_tooltip_data-{{ node_tooltip_data.node_id }}'>
  	{{ cluster_tooltip.build(node_tooltip_data) }}
  	</div>
  {% endfor %}
  </div>

  <div id="canvas">
      <!-- Graph will go in here -->
      <svg>
        <defs>
          <filter id="drop-shadow-glow" filterUnits="userSpaceOnUse" width="250%" height="250%">
              <feGaussianBlur in="SourceGraphic" stdDeviation="12" result="blur-out"/>
              <feColorMatrix in="blur-out" type="hueRotate" values="0" result="color-out"/>
              <feOffset in="color-out" dx="0" dy="0" result="the-shadow"/>
              <feComponentTransfer type="linear" slope="0.2" result="shadow-opacity"/>
              <feBlend in="SourceGraphic" in2="the-shadow" mode="normal"/>
          </filter>
          <filter id="drop-shadow-pulse" filterUnits="userSpaceOnUse" width="250%" height="250%">
              <feGaussianBlur in="SourceGraphic" stdDeviation="12" result="blur-out">
                  <animate attributeName="stdDeviation" from="0" to="100" dur="1.5s" repeatCount="indefinite" />
              </feGaussianBlur>
              <feColorMatrix in="blur-out" type="hueRotate" values="0" result="color-out"/>
              <feOffset in="color-out" dx="0" dy="0" result="the-shadow"/>
              <feComponentTransfer type="linear" slope="0.2" result="shadow-opacity"/>
              <feBlend in="SourceGraphic" in2="the-shadow" mode="normal"/>
          </filter>
        </defs>
      </svg>
  </div>

  <!-- Seperate canvas and panes so we can overlay elements -->
  <div id="panes">
    <img id="logo" src="https://i.imgur.com/bxux6WA.png">
    {% include "toolbar.html" %}

    <div id="header">
      <noscript><b>Requires JavaScript (d3.js) for visualizations</b></noscript>
      <h1> {{ title }} </h1>
    </div>

    <!-- Panes for each of the tips -->
    <div id="tooltip">
      <div id="tooltip_content" class="pane_content">
        Hover over a node to see attributes about it.
      </div>
    </div>

    <div id="helptip">
        <div id="helptip_content" class="pane_content">
            {% include 'help.html' %}
        </div>
      </div>

    <div id="meta">
      <div id="meta_content" class="pane_content">
        {% include 'summary_data.html' %}
      </div>
    </div>

  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.5/d3.min.js"></script>

  <script>{{ js_text }}</script>
</body>

</html>
